<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Water paint simulation | DreamOnward</title>
  <meta name="description" content="Paint tool using water paint on top of a fluid simulation. A user paints colored pigments onto a canvas after which they may be moved by fluid effects.">

  <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed" rel="stylesheet">

  <link type="text/css" rel="stylesheet" href="/assets/main-f021d588a416e00beed710bc60b3e7d8ac016a8d0eb7a5f17faa05cb145c27b4.css">
  <link type="text/css" rel="stylesheet" href="/assets/syntax-pygments-306491d01ec67c312c7391230abbf00e22dbdb2a9c283cb4cf00dc270ce28162.css">
  <link href="/assets/vendor/lightbox/css/lightbox.min.css" rel="stylesheet">
  <link rel="canonical" href="https://dreamonward.com/project/water-paint-simulation/">
</head>


  <body>
    <header class="banner" role="banner">
  <nav class="container site-nav">

    <a class="site-logo-space" href="/">
      <div class="site-logo">
        <img src="/assets/img/DreamOnward_logo_v1-800x800.png" height="60" srcset="/assets/img/DreamOnward_logo_v1-800x800.png 1x, /assets/img/DreamOnward_logo_v1-800x800.png 2x, /assets/img/DreamOnward_logo_v1-800x800.png 3x"> 
      </div>
      <div class="site-header-titles">
        <h1 class="site-header-title">DreamOnward</h1>
        <span class="site-header-subtitle">Full stack web development</span>
      </div>
    </a>

    <ul>
      
        
        <li>
          <a href="/projects">Projects</a>
        </li>
        
      
    </ul>
  </nav>


</header>


    <main class="page-content" aria-label="Content">
    <article class="project container" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Water paint simulation</h1>
  </header>

  <div class="gallery-container">
    
      <a class="gallery-thumb-link"
          href="water-paint-simulation-window.png"
          data-lightbox="project-images"
          data-title="Paint program on using water paint on top of fluid simulation." 
          >
          
          <img src="/assets/water-paint-simulation/water-paint-simulation-window-5ceb9902c306c42c9514b915776b3e9e75d4c61bad489477ac6a4179c5e92c54.png" alt="Paint program on using water paint on top of fluid simulation." class=gallery-thumb width="200" height="200">
        </a>
    
      <a class="gallery-thumb-link"
          href="fluid_sim_glyps.png"
          data-lightbox="project-images"
          data-title="Vector field of fluid simulation." 
          >
          
          <img src="/assets/water-paint-simulation/fluid_sim_glyps-5ceb9902c306c42c9514b915776b3e9e75d4c61bad489477ac6a4179c5e92c54.png" alt="Vector field of fluid simulation." class=gallery-thumb width="200" height="200">
        </a>
    
      <a class="gallery-thumb-link"
          href="brush_effect_on_simulation.png"
          data-lightbox="project-images"
          data-title="Fluid flow manipulation by dragging brush through it." 
          >
          
          <img src="/assets/water-paint-simulation/brush_effect_on_simulation-5ceb9902c306c42c9514b915776b3e9e75d4c61bad489477ac6a4179c5e92c54.png" alt="Fluid flow manipulation by dragging brush through it." class=gallery-thumb width="200" height="200">
        </a>
    
      <a class="gallery-thumb-link"
          href="fluid_density_grayscale.png"
          data-lightbox="project-images"
          data-title="Image of water density on the canvas." 
          >
          
          <img src="/assets/water-paint-simulation/fluid_density_grayscale-5ceb9902c306c42c9514b915776b3e9e75d4c61bad489477ac6a4179c5e92c54.png" alt="Image of water density on the canvas." class=gallery-thumb width="200" height="200">
        </a>
    
      <a class="gallery-thumb-link"
          href="fluid_density_mask.png"
          data-lightbox="project-images"
          data-title="Binary image of area's where pigments are effected by fluid movement, thesholded water density image." 
          >
          
          <img src="/assets/water-paint-simulation/fluid_density_mask-5ceb9902c306c42c9514b915776b3e9e75d4c61bad489477ac6a4179c5e92c54.png" alt="Binary image of area's where pigments are effected by fluid movement, thesholded water density image." class=gallery-thumb width="200" height="200">
        </a>
    
  </div>

<div class="project-meta">
    <dl>
      <dt>Date</dt>
      <dd><time datetime="2012-02-05T00:00:00+00:00" itemprop="datePublished">Feb 5, 2012</time></dd>

      

      

      
      <dt>Role</dt>
      <dd>Advanced Computer Graphics student</dd>
      

      
      <dt>Contribution</dt>
      <dd>Everything from scratch</dd>
      

      <dt>Project type</dt>
      <dd>
        
        <span title="Project done in the period before DreamOnward">Before DreamOnward</span>
        
      </dd>

      
      <dt>Techniques</dt>

      <dd>
        <ul>
        
        <li>
        Qt
        </li>
        
        <li>
        OpenGL
        </li>
        
        <li>
        Fluid simulation
        </li>
        
        </ul>
      </dd>
      
    </dl>

    
  </div>

  <div class="post-content" itemprop="articleBody">    
    <p>Paint tool using water paint on top of a fluid simulation. A user paints colored pigments onto a canvas after which they may be moved by fluid effects.</p>

<p>Pigments float around in the wet parts of the canvas and currents are created by the users brush as well as by water evaporation.</p>

<div class="no-err">

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">proc</span> <span class="nf">DragBrush</span><span class="p">(</span><span class="n">Wq</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">dt</span> <span class="p">,</span> <span class="n">brush</span> <span class="p">,</span> <span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
  <span class="k">for</span> <span class="nf">cells</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">in</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="nf">range</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">force</span> <span class="p">=</span> <span class="nf">sqrt</span><span class="p">((</span><span class="n">i</span><span class="err">−</span><span class="n">px</span><span class="p">)</span><span class="err">ˆ</span><span class="m">2</span><span class="p">+(</span><span class="n">j</span><span class="err">−</span><span class="n">py</span><span class="p">)</span><span class="err">ˆ</span><span class="m">2</span><span class="p">)</span> <span class="p">/</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">range</span><span class="p">;</span> <span class="nf">vx</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="p">+=</span> <span class="n">force</span> <span class="err">∗</span> <span class="n">dx</span><span class="p">;</span>
    <span class="nf">vy</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="p">+=</span> <span class="n">force</span> <span class="err">∗</span> <span class="n">dy</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="nf">isWet</span><span class="p">())</span> <span class="k">do</span>
      <span class="n">addition</span> <span class="p">=</span> <span class="n">force</span> <span class="err">∗</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">Wq</span><span class="p">;</span>
      <span class="n">wq</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="p">+=</span> <span class="n">addition</span><span class="p">;</span>
      <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">Wq</span> <span class="p">=</span> <span class="nf">max</span><span class="p">(</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">Wq</span> <span class="err">−</span> <span class="n">addition</span> <span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">reduction</span> <span class="p">=</span> <span class="m">1</span><span class="err">−</span><span class="p">(</span><span class="n">force</span> <span class="err">∗</span> <span class="m">1</span> <span class="p">/</span> <span class="m">20</span><span class="p">);</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">Wq</span> <span class="p">=</span> <span class="nf">min</span> <span class="p">(</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">Wq</span> <span class="p">+</span> <span class="n">Wq</span><span class="p">[</span> <span class="n">idx</span> <span class="p">]</span> <span class="err">∗</span> <span class="n">reduction</span> <span class="p">,</span> <span class="n">brush</span><span class="err">−</span><span class="p">&gt;</span><span class="n">maxWater</span> <span class="p">)</span> <span class="n">wq</span><span class="p">[</span> <span class="n">idx</span> <span class="p">]</span> <span class="err">∗</span><span class="p">=</span> <span class="n">reduction</span>
    <span class="n">end</span> <span class="k">if</span> 
  <span class="n">end</span> <span class="k">for</span>
<span class="n">end</span> <span class="n">proc</span></code></pre></figure>

</div>

  </div>

</article>

    </main>

    <footer class="site-footer" itemscope="" itemtype="http://schema.org/Corporation">
  <div class="container">
    <div class="footer-block"
        itemprop="address" 
        itemscope="" 
        itemtype="http://schema.org/PostalAddress">
      <h4 class="show-for-sr">Contact</h4>
      <a 
        href="https://www.google.com/maps/place/Kremerpad+11,+Hilversum,+Netherlands/@52.242604,5.1749074,17"
        title="Address in Google maps" 
        itemprop="address"
        itemscope=""
        itemtype="http://schema.org/PostalAddress">
        <span itemprop="name"><strong>DreamOnward</strong></span><br>
        <span itemprop="streetAddress">Kremerpad 11</span><br>
        <span itemprop="postalCode">1222 DB</span> <span itemprop="addressLocality">Hilversum</span>
      </a>
    </div>

    <div class="footer-block">
      <h4 class="show-for-sr">Media</h4>
      <ul class="social-media-list">
        
        <li>
          <a href="https://github.com/rrmoelker"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">rrmoelker</span></a>

        </li>
        

        
        <li>
          <a href="https://www.linkedin.com/company/dreamonward">
	<span class="icon"><svg viewBox="0 0 480 480"><path id="LinkedIn" d="M430.117,261.543V420.56h-92.188V272.193c0-37.271-13.334-62.707-46.703-62.707   c-25.473,0-40.632,17.142-47.301,33.724c-2.432,5.928-3.058,14.179-3.058,22.477V420.56h-92.219c0,0,1.242-251.285,0-277.32h92.21   v39.309c-0.187,0.294-0.43,0.611-0.606,0.896h0.606v-0.896c12.251-18.869,34.13-45.824,83.102-45.824   C384.633,136.724,430.117,176.361,430.117,261.543z M52.183,9.558C20.635,9.558,0,30.251,0,57.463   c0,26.619,20.038,47.94,50.959,47.94h0.616c32.159,0,52.159-21.317,52.159-47.94C103.128,30.251,83.734,9.558,52.183,9.558z    M5.477,420.56h92.184v-277.32H5.477V420.56z"/></svg></span><span class="username">dreamonward</span>
</a>

        </li>
        

        

        <li>
          <a href="mailto:info@dreamonward.com"><span class="icon"></span> info@dreamonward.com</a>
        </li>
      </ul>
    </div>


    <div class="footer-block contact" >
      <h4 class="show-for-sr">Info</h4>
      <span>KvK</span> <span>56017235</span><br>
      <span>General Terms and Conditions:
        <a href="/assets/terms/AV_DreamOnward_EN_2016-10-03.pdf">EN</a>
        <a href="/assets/terms/AV_DreamOnward_NL_2016-10-03.pdf">NL</a></span>
    </div>
  </div>


</footer>

  </body>

  <script src="/assets/vendor/lightbox/js/lightbox-plus-jquery.min.js"></script>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83787018-1', 'auto');
  ga('send', 'pageview');

</script>

  <span>auto-deployed!</span>
</html>
